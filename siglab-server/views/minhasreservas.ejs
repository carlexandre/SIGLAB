<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SIGLAB - Minhas Reservas</title>

    <link href="/css/historicos.css" rel="stylesheet">

    <link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
    
    <link rel="manifest" href="/favicon/site.webmanifest">
    
    <link rel="shortcut icon" href="/favicon/favicon.ico">
    
</head>

<body>
    <%- include('partials/header') %> 

    <main>
        <h1 class="titulo-pagina">Minhas Reservas</h1>

        <div class="content-container">

            <div class="tab-content active">
            
                <h2 class="content-subtitle">Próximas Reservas</h2>
                <ul class="history-list">
                    <% if (proximas && proximas.length > 0) { %>
                        <% proximas.forEach(res => { %>
                            <li>
                                <span>
                                    <strong>Lab:</strong> <%= res.id_lab %> | 
                                    <strong>Usuário:</strong> <%= res.name %> (<%= res.id_servidor %>) | 
                                    <strong>Data:</strong> <%= new Date(res.data_inicio).toLocaleString('pt-BR') %>
                                </span>
                                <form action="/reservas/<%= res.id %>/delete" method="POST" style="display:inline;" onsubmit="return confirm('Deseja realmente deletar esta reserva?');">
                                    <button type="submit" class="btn-delete">X</button>
                                </form>
                            </li>
                            
                        <% }); %>
                    <% } else { %>
                        <li>Nenhuma reserva futura encontrada.</li>
                    <% } %>
                </ul>
                
                <h2 class="content-subtitle">Reservas Passadas</h2>
                <ul class="history-list">
                    <% if (passadas && passadas.length > 0) { %>
                        <% passadas.forEach(res => { %>
                            <li>
                                <strong>Lab:</strong> <%= res.id_lab %> | 
                                <strong>Usuário:</strong> <%= res.name %> (<%= res.id_servidor %>) | 
                                <strong>Data:</strong> <%= new Date(res.data_fim).toLocaleString('pt-BR') %>
                            </li> 
                        <% }); %>
                    <% } else { %>
                        <li>Nenhuma reserva passada encontrada.</li>
                    <% } %>
                </ul>
            </div>
        </div>

    </main>

    <%- include('partials/footer') %> 

</body>
</html>