<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SIGLAB: Cadastro de Avisos</title>
    
    <link href="/css/cadastro.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=VT323&display=swap" rel="stylesheet">

    <link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
    
    <link rel="manifest" href="/favicon/site.webmanifest">
    
    <link rel="shortcut icon" href="/favicon/favicon.ico">

    <style>
        :root {
            --bg-color: #000000;
            --main-green: #00ff41;
            --dim-green: #008F11;
            --alert-pink: #ff00ff;
            --ui-gray: #1a1a1a;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            background-color: var(--bg-color);
            background-image: 
                linear-gradient(rgba(0, 255, 65, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 255, 65, 0.03) 1px, transparent 1px);
            background-size: 20px 20px; /* Efeito de grade no fundo */
            color: var(--main-green);
            font-family: 'VT323', monospace;
            font-size: 20px;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            border: 4px solid var(--ui-gray); /* Borda na tela toda */
        }
    </style>
</head>

<%- include('partials/header') %>

<body>
    <main class="main-container">

        <h2 class="titulo-pagina"><%= (locals.aviso) ? 'Editar Aviso' : 'Novo Aviso' %></h2>
        
        <form id="form-aviso" class="form-cadastro" method="POST" action="<%= (locals.aviso) ? '/avisos/editar/' + aviso.id : '/cadastro/avisos' %>">
        
            <div class="form-group">
                <label for="titulo">T√≠tulo:</label>
                <input type="text" id="titulo" name="titulo" placeholder="Ex: Manuten√ß√£o da Rede" value="<%= (locals.aviso) ? aviso.titulo : '' %>" required>
            </div>
            
            <div class="form-group">
                <label for="mensagem">Mensagem (Descri√ß√£o):</label>
                <textarea id="mensagem" name="mensagem" rows="4" placeholder="Descreva o aviso..." required><%= (locals.aviso) ? aviso.mensagem : '' %></textarea>
            </div>

            <div class="form-group">
                <label for="tipo">Tipo:</label>
                <select id="tipo" name="tipo" required>
                    <option value="">Selecione um tipo...</option>
                    <option value="Manuten√ß√£o" <%= (locals.aviso && aviso.tipo === 'Manuten√ß√£o') ? 'selected' : '' %>>Manuten√ß√£o</option>
                    <option value="Informativo" <%= (locals.aviso && aviso.tipo === 'Informativo') ? 'selected' : '' %>>Informativo</option>
                    <option value="Alerta" <%= (locals.aviso && aviso.tipo === 'Alerta') ? 'selected' : '' %>>Alerta</option>
                </select>
            </div>

            <div class="form-group">
                <label for="prioridade">Prioridade:</label>
                <select id="prioridade" name="prioridade" required>
                    <option value="">Selecione a prioridade...</option>
                    <option value="Baixa" <%= (locals.aviso && aviso.prioridade === 'Baixa') ? 'selected' : '' %>>Baixa</option>
                    <option value="M√©dia" <%= (locals.aviso && aviso.prioridade === 'M√©dia') ? 'selected' : '' %>>M√©dia</option>
                    <option value="Alta" <%= (locals.aviso && aviso.prioridade === 'Alta') ? 'selected' : '' %>>Alta</option>
                    <option value="Cr√≠tica" <%= (locals.aviso && aviso.prioridade === 'Cr√≠tica') ? 'selected' : '' %>>Cr√≠tica</option>
                </select>
            </div>

            <div class="form-group">
                <label for="dataInicio">In√≠cio do Aviso:</label>
                <input type="datetime-local" id="dataInicio" name="dataInicio" value="<%= (locals.aviso && aviso.dataInicio) ? aviso.dataInicio.substring(0,16) : '' %>" required>
            </div>
            
            <div class="form-group">
                <label for="dataFim">Fim do Aviso:</label>
                <input type="datetime-local" id="dataFim" name="dataFim" value="<%= (locals.aviso && aviso.dataFim) ? aviso.dataFim.substring(0,16) : '' %>">
            </div>

            <div class="form-group">
                <label for="labs">Laborat√≥rios (separados por v√≠rgula):</label>
                <input type="text" id="labs" name="labs" placeholder="Ex: 101, 102, 205" value="<%= (locals.aviso && aviso.labs) ? aviso.labs.join(', ') : '' %>">
            </div>

            <button type="submit" class="btn-pixel">üíæ <%= (locals.aviso) ? 'SALVAR ALTERA√á√ïES' : 'SALVAR AVISO' %></button>
        </form>
        
        <div style="margin-top: 20px; text-align: center; font-family: 'Press Start 2P', monospace;">
            <p id="feedback"></p>
        </div>

    </main>
</body>

<%- include('partials/footer') %>

</html>