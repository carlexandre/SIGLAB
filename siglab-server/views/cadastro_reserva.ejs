<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SIGLAB: Nova Reserva</title>
    
    <link href="/css/cadastro.css" rel="stylesheet">

    <style>
        :root {
            --bg-color: #000000;
            --main-green: #00ff41;
            --dim-green: #008F11;
            --alert-pink: #ff00ff;
            --ui-gray: #1a1a1a;
        }

        input::-webkit-inner-spin-button, 
        input::-webkit-calendar-picker-indicator {
            filter: invert(1) sepia(1) saturate(5) hue-rotate(90deg);
            cursor: pointer;
        }

        input[readonly] {
            background-color: #111;
            border-color: var(--dim-green);
            color: var(--main-green);
            cursor: not-allowed;
        }
    </style>
</head>

<%- include('partials/header') %>

<body>
    <main class="main-container">

        <h2 class="titulo-pagina">Agendar Laborat√≥rio</h2>
        
        <form action="/cadastro/reserva" method="POST" id="form-reserva" class="form-cadastro">
        
            <div class="form-group">
                <label for="id_lab">Laborat√≥rio:</label>
                <select id="id_lab" name="id_lab" required>
                    <option value="">Selecione...</option>
                    <% laboratorios.forEach(lab => { %>
                        <option value="<%= lab.id %>" <%= selectedLab == lab.id ? 'selected' : '' %>>
                            <%= lab.nome %>
                        </option>
                    <% }) %>
                </select>
            </div>

            <div class="form-group">
                <label for="id_servidor">ID do Servidor:</label>
                <% if(user && user.tipo === 'professor') { %>
                    <input type="number" value="<%= userMatricula %>" id="id_servidor" name="id_servidor" readonly>
                <% } %>
                <% if(user && user.tipo === 'admin') { %>
                    <input type="number" id="id_servidor" name="id_servidor" placeholder="Ex: 564967">
                <% } %>
            </div>

            <div class="form-group">
                <label for="name">Nome do Respons√°vel:</label>
                <% if(user && user.tipo === 'professor') { %>
                    <input type="text" value="<%= userNome %>" id="name" name="name" readonly>
                <% } %>
                <% if(user && user.tipo === 'admin') { %>
                    <input type="text" id="name" name="name" placeholder="Ex: Carlos Alexandre">
                <% } %>

            </div>

            <div class="form-group">
                <label for="data_inicio">Data e Hora de In√≠cio:</label>
                <!-- Preenche com a data vinda da URL + hor√°rio padr√£o 08:00 -->
                <input type="datetime-local" id="data_inicio" name="data_inicio" 
                       value="<%= selectedDate + 'T08:00' %>" required> 
            </div>

            <div class="form-group">
                <label for="data_fim">Data e Hora de T√©rmino:</label>
                <!-- Preenche com a data vinda da URL + hor√°rio padr√£o 10:00 -->
                <input type="datetime-local" id="data_fim" name="data_fim" 
                       value="<%= selectedDate + 'T10:00' %>" required>
            </div>

            <div class="form-group">
                <label for="motivo">Motivo da Reserva:</label>
                <textarea id="motivo" name="motivo" rows="3" placeholder="Ex: Aula de Banco de Dados..."></textarea>
            </div>

            <button type="submit" class="btn-pixel">üìÖ CONFIRMAR RESERVA</button>
        </form>

    </main>
</body>

<%- include('partials/footer') %>
</html>