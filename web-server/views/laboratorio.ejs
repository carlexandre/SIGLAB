<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
    <title>SIGLAB - Laborat√≥rio <%= lab.id %></title>
    
    <link href="/css/laboratorios.css" rel="stylesheet">
</head>

<body>
    
    <%- include('partials/header') %> 

    <main>
        <h1 class="titulo-pagina"><%= lab.nome %></h1>

        <p class="subtitulo-localizacao">
            <%= lab.localizacao %>
        </p>

        <!-- pain√©is de informa√ß√£o (disponibilidade/avisos) -->
        <div class="info-panels-container">
            
            <a href="/disponibilidade/<%= lab.id %>" class="info-card-link">
                <div class="info-card">
                    <h2>Disponibilidade do Laborat√≥rio</h2>
                </div>
            </a>
            
            <a href="/laboratorios/<%= lab.id %>/avisos" class="info-card-link">
                <div class="info-card">
                    <h2>Avisos</h2>
                </div>
            </a>

            <% if (user && user.tipo === 'admin') { %>
                <a href="/historico/<%= lab.id %>" class="info-card-link">
                    <div class="info-card">
                        <h2>Hist√≥rico</h2>
                    </div>
                </a>
            <% } %>
        </div>

        <!-- container da topologia -->
        <div class="topology-container">
            <h2>Topologia do Laborat√≥rio</h2>
            
            <div class="topology-map">
                <!-- 
                  looping EJS para listar os dispositivos 
                  (por enquanto, eles v√£o aparecer em sequ√™ncia. 
                  o posicionamento (x, y) viria do DB no futuro para o drag-and-drop)
                -->
                <% lab.dispositivos.forEach(disp => { %>
                    
                    <div class="device">
                        
                        <span class="device-icon">
                            <% if (disp.tipo === 'projetor') { %>
                                üìΩÔ∏è <!-- projetor -->
                            <% } else if (disp.tipo === 'impressora') { %>
                                üñ®Ô∏è <!-- impressora -->
                            <% } else { %>
                                üñ•Ô∏è <!-- computador -->
                            <% } %>
                        </span>
                        
                        <div class="tooltip">
                            <div class="tooltip-content">
                                <p><strong>Dispositivo:</strong> <%= disp.nome %></p>
                                <p><strong>Status:</strong> <%= disp.status %></p>
                                <a href="/laboratorios/<%= lab.id %>/report/<%= disp.id_dispositivo %>">Reportar Problema</a>
                            </div>
                        </div>
                    </div>
                
                <% }); %>
            </div>
        </div>
    </main>

    <%- include('partials/footer') %> 

</body>
</html>